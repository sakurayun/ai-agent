# 更新日志

## 最新修改（当前版本）

### ✅ UI 颜色统一
**问题**：顶部导航栏和内容区的UI颜色不一致
**解决**：
- 顶部控制栏背景色从 `rgb(0x1a1a1a)` 改为 `rgb(0x000000)`
- 现在顶部控制栏与主内容区背景色完全一致（纯黑色）
- 保持边框颜色 `rgb(0x333333)` 作为视觉分隔

**修改文件**：`src/app.rs`
```rust
// 之前
.bg(rgb(0x1a1a1a))

// 之后
.bg(rgb(0x000000))
```

### ✅ 鼠标指针样式
**添加**：为拖拽区域添加鼠标指针样式
- 左侧导航栏：`.cursor(CursorStyle::Arrow)`
- 顶部控制栏：`.cursor(CursorStyle::Arrow)`

### ✅ 拖拽区域标识
**功能**：已为窗口拖拽区域添加 ID 标记
- 左侧导航栏：`id("sidebar-drag-region")`
- 顶部控制栏：`id("titlebar-drag-region")`

### ⏳ 窗口拖拽功能
**状态**：待实现
**原因**：GPUI 框架在 Windows 平台对无标题栏窗口的拖拽支持尚不完善

**解决方案文档**：查看 `DRAG_SOLUTION.md` 获取详细的实现方案

## 之前的修改

### 圆角样式恢复
- 所有卡片容器恢复 `.rounded_lg()` 样式
- 导航按钮使用 `.rounded_md()` 样式
- 界面现在有柔和的圆角效果

**修改文件**：
- `src/views/home.rs`
- `src/views/settings.rs`

### 导航栏布局调整
- 左侧导航栏延伸至窗口顶部
- 宽度保持 60px，显示图标菜单
- 图标：🏠（首页）、⚙️（设置）

### 控制栏简化
- 移除标题文字 "My GPUI App"
- 只保留右侧三大金刚按钮
  - 最小化（−）
  - 最大化/还原（□）
  - 关闭（×，红色悬停）

### 深色主题
全局深色（黑色）主题：
- 主背景：`rgb(0x000000)` 纯黑
- 导航栏：`rgb(0x0d0d0d)` 深灰黑
- 卡片背景：`rgb(0x0d0d0d)`
- 按钮高亮：`rgb(0x2a2a2a)`
- 边框：`rgb(0x333333)`
- 主文字：`rgb(0xffffff)`
- 次要文字：`rgb(0xaaaaaa)`
- 强调色：`rgb(0x58a6ff)` 蓝色

### 无标题栏模式
- 窗口设置为 `titlebar: None`
- 自定义标题栏高度：32px
- 窗口类型：`WindowKind::Normal`

## 已知问题

### 🐛 窗口拖拽不可用
**问题描述**：
- 用户无法通过拖拽左侧导航栏或顶部控制栏来移动窗口
- 这是 GPUI 框架在 Windows 平台的已知限制

**影响范围**：
- Windows 平台
- 无标题栏窗口

**参考**：
- Zed 编辑器 Issue #14106：类似问题
- 查看 `DRAG_SOLUTION.md` 获取解决方案

### 临时解决方法
在拖拽功能完善之前，可以使用：
1. **系统快捷键**：
   - `Win + Arrow` 移动和缩放窗口
   - `Alt + Space` 打开窗口菜单（可选择"移动"）
2. **Alt+拖拽**：某些窗口管理器支持 Alt+左键拖拽任意窗口

## 待办事项

### 高优先级
- [ ] 实现窗口拖拽功能（参考 `DRAG_SOLUTION.md`）
- [ ] 实现最小化按钮功能
- [ ] 实现最大化/还原按钮功能

### 中优先级
- [ ] 添加双击顶部栏最大化功能
- [ ] 优化按钮悬停动画
- [ ] 添加窗口阴影效果

### 低优先级
- [ ] 添加主题切换功能
- [ ] 支持自定义窗口颜色
- [ ] 添加窗口大小调整边框

## 技术栈

- **框架**：GPUI 0.2.2
- **UI 组件**：gpui-component 0.4.0-preview1
- **语言**：Rust
- **平台**：Windows (主要开发平台)

## 文档资源

1. **WINDOW_DRAG.md**：窗口拖拽功能说明
2. **DRAG_SOLUTION.md**：详细的拖拽实现方案
3. **README.md**：项目介绍和使用说明
4. **QUICK_START.md**：快速开始指南

## 如何测试

1. 关闭正在运行的程序
2. 等待编译完成（首次编译较慢）
3. 运行：`cargo run`
4. 检查：
   - ✅ 顶部控制栏颜色是否与内容区一致
   - ✅ 所有卡片是否有圆角
   - ✅ 导航栏是否延伸至顶部
   - ✅ 三个控制按钮是否可点击
   - ⏳ 窗口拖拽（暂不可用）

## 贡献指南

如果你想帮助实现窗口拖拽功能：
1. 阅读 `DRAG_SOLUTION.md`
2. 选择一个实现方案
3. 测试并提交代码
4. 更新此 CHANGELOG

## 版本历史

### v0.1.0 (当前)
- 初始版本
- 基础 UI 实现
- 深色主题
- 自定义标题栏（不可拖拽）

---

最后更新：2024-xx-xx
